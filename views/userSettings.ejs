<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Settings</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="./css/main.css" rel="stylesheet" >
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="http://localhost:3000/">TradieTrades</a>
      <div class="collapse navbar-collapse navbar-nav mr-auto">
          <a href="index.html#about-trades" class="text-white nav-item nav-link">How We Work</a>
          <a href="http://localhost:3000/allServices.html" class="text-white nav-item nav-link">Request A Service</a>
          <a href="/invoice/billingForm" class="text-white nav-item nav-link">Pay for Service</a>

        </div>
      <div class="my-2 my-lg-0 navbar-nav">
        <a href="http://localhost:3000/customerDashboard.html" class="text-white nav-item nav-link active">My Dashboard</a>
        <a href="/users/settings" class="text-white nav-item nav-link">Account Settings</a>
        <a href="/users/logout" class="text-white nav-item nav-link">Logout</a>
      </div>
    </div>
  </nav>

  <main>
    <div class="d-flex flex-row">
      <div id="settings-left-nav nav-pills" role="tablist" aria-orientation="vertical">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a id="nav-about-me" class="nav-link active" href="#my-details">My Details</a>
          </li>
          <li class="nav-item">
            <a id="nav-change-address" class="nav-link active" href="#change-address">Change My Address</a>
          </li>
          <li class="nav-item">
            <a id="nav-change-pw" class="nav-link" href="#change-password">Change My Password</a>
          </li>
          <li class="nav-item">
            <a id="nav-deactivate-acc" class="nav-link" href="#deactivate-account">Deactivate Account</a>
          </li>
        </ul>
      </div>
      <div class="container tab-content align-items-center">
        <%- include ('./partials/alerts.ejs') %>
        <h2 id="tabTitle">My Details</h2>
        <p id="tab-message"></p>
        <form id="my-details" action="/users/change-details" method="post">
          <div class="d-flex flex-row ">
            <div class="me-5">
              <label for="first_name">First name</label>
              <input type="text" class="form-control form-control-lg position-static mb-4" aria-label="First name" name="first_name" id="first_name" placeholder="<%=user.first_name%>">
            </div>
           <div>
            <label for="last_name">Last name</label>
            <input type="text" class="form-control form-control-lg position-static" aria-label="Last name" name="last_name" id="last_name" placeholder="<%=user.last_name%>">
           </div>
          </div>
            <label for="email">Email</label>
            <input type="email" class="form-control form-control-lg position-static w-50" aria-label="Email" name="email" id="email" placeholder="<%=user.email%>"><br>

            <label for="dob">Phone Number</label>
            <input type="number" class="form-control form-control-lg position-static w-25" aria-label="Phone Number" name="phone" id="phone" placeholder="<%= user.phone ? user.phone : 'eg. 0403 111 222'%>"><br>

            <label for="personal-bio">Personal Bio</label>
            <textarea class="form-control" id="personal-bio" rows="5" placeholder="<%= user.bio ? user.bio : 'Say something about yourself!'%>"></textarea>
            <div class="d-flex flex-column justify-content-center align-items-center">
              <button type="submit" class="btn-primary btn-lg btn-primary mt-4">Save</button><br>
            </div>
        </form>

        <form id="change-address" class="visually-hidden " action="" method="get">
          <label for="current_address">Street address</label>
          <input type="text" class="form-control form-control-lg position-static w-50 mb-4" autocomplete="off" aria-label="Current Address" name="current_adress" id="current_adress" placeholder="<%= user.address ? user.address : 'eg. 42 Wallaby Way'%>" required>
          
          <label for="city">City</label>
          <input type="text" class="form-control form-control-lg position-static w-50 mb-4" name="city" id="city" placeholder="<%= user.city ? user.city : 'eg. Sydney'%>">

          <label for="state">Postcode</label>
          <input type="text" class="form-control form-control-lg position-static w-50 mb-4" name="postcode" id="postcode" placeholder="<%= user.postcode ? user.postcode : 'eg. 2000'%>">

          <label for="state">State</label>
          <input type="text" class="form-control form-control-lg position-static w-50 mb-4" name="state" id="state" placeholder="<%= user.state ? user.state : 'eg. NSW'%>">

          <div class="d-flex flex-column justify-content-center align-items-center">
            <button type="submit" class="btn-primary btn-lg btn-primary">Update Address</button><br>
          </div>
        </form>

        <form id="change-password" class="visually-hidden " action="" method="get">
          <label for="current_password">Current password</label>
          <input type="password" class="form-control form-control-lg position-static w-50 mb-4" aria-label="Current Password" name="old_password" id="old_password" placeholder="Old password" required>
    
          <label for="new_password">New password</label>
          <input type="password" class="form-control form-control-lg position-static w-50 mb-4" aria-label="New Password" name="new_password" id="new_password" placeholder="New password" required>

          <label for="confirm_new_password">Confirm new password</label>
          <input type="password" class="form-control form-control-lg position-static w-50 mb-4" aria-label="Confirm New Password" name="confirm_new_password" id="confirm_new_password" placeholder="Confirm new password" required><br>
          <div class="d-flex flex-column justify-content-center align-items-center">
            <button type="submit" class="btn-primary btn-lg btn-primary">Update Password</button><br>
          </div>
        </form>

        <form id="deactivate-account" class="visually-hidden" action="" method="get">
          <label for="password">Confirm email</label>
          <input type="email" class="form-control form-control-lg position-static w-50 mb-2" aria-label="Email" autocomplete="new-email" name="email" id="email" placeholder="Confirm email address"><br>

          <label for="password">Confirm password</label>
          <input type="password" class="form-control form-control-lg position-static w-50 mb-4" aria-label="Password" autocomplete="new-password" name="password" id="password" placeholder="Confirm password" required>
    
          <div class="d-flex flex-column">
            <button type="submit" class="btn-danger btn-lg btn-primary w-25">Deactivate Account</button><br>
          </div>
        </form>
      </div>
    </div>
  </main>
</body>

<footer class="fixed-bottom bg-dark">
  <p class="footer-p text-end text-light">&copy; 2022 ASD Group 6 <br>All Copyrights Reserved</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script>
  let navAboutMe = document.getElementById("nav-about-me");
  let navChangePassword = document.getElementById("nav-change-pw");
  let navDeactivateAcc = document.getElementById("nav-deactivate-acc");
  let navChangeAddress = document.getElementById("nav-change-address");
  let tabTitle = document.getElementById("tabTitle");

  navAboutMe.onclick = function(){
      tabTitle.innerHTML = "My Details"
      let formToShow = document.getElementById("my-details");
      formToShow.classList.remove("visually-hidden");
      document.getElementById("change-password").classList.add("visually-hidden");
      document.getElementById("change-address").classList.add("visually-hidden");
      document.getElementById("deactivate-account").classList.add("visually-hidden");
  }

  navChangeAddress.onclick = function () {
    tabTitle.innerHTML = "Change Address"
    let formToShow = document.getElementById("change-address");
    formToShow.classList.remove("visually-hidden");
    document.getElementById("change-password").classList.add("visually-hidden");
    document.getElementById("deactivate-account").classList.add("visually-hidden");
    document.getElementById("my-details").classList.add("visually-hidden");
  }

  navChangePassword.onclick = function(){
      tabTitle.innerHTML = "Change Password"
      let formToShow = document.getElementById("change-password");
      formToShow.classList.remove("visually-hidden");
      document.getElementById("my-details").classList.add("visually-hidden");
      document.getElementById("change-address").classList.add("visually-hidden");
      document.getElementById("deactivate-account").classList.add("visually-hidden");
  }

  navDeactivateAcc.onclick = function(){
      tabTitle.innerHTML = "Deactivate Account"
      let formToShow = document.getElementById("deactivate-account");
      formToShow.classList.remove("visually-hidden");
      document.getElementById("change-password").classList.add("visually-hidden");
      document.getElementById("change-address").classList.add("visually-hidden");
      document.getElementById("my-details").classList.add("visually-hidden");
  }
</script>
</html>